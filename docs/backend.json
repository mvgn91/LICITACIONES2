
{
    "entities": {
        "Contrato": {
            "title": "Contrato",
            "description": "Represents a contract with all its details.",
            "type": "object",
            "properties": {
                "nombre": { "type": "string" },
                "cliente": { "type": "string" },
                "montoBase": { "type": "number" },
                "montoSinIVA": { "type": "number" },
                "montoConIVA": { "type": "number" },
                "anticipoMonto": { "type": "number" },
                "anticipoFecha": { "type": "string", "format": "date-time" },
                "descripcion": { "type": "string" },
                "fechaInicio": { "type": "string", "format": "date-time" },
                "fechaTerminoEstimada": { "type": "string", "format": "date-time" },
                "observacionesGenerales": { "type": "string" },
                "estado": { "type": "string", "enum": ["Activo", "Cerrado"] },
                "docConstructoraOK": { "type": "boolean" },
                "docConstructoraObs": { "type": "string" },
                "docControlOK": { "type": "boolean" },
                "docControlObs": { "type": "string" },
                "cierreObservaciones": { "type": "string" },
                "createdAt": { "type": "string", "format": "date-time" },
                "userId": { "type": "string" }
            },
            "required": ["nombre", "cliente", "montoConIVA", "fechaInicio", "fechaTerminoEstimada", "estado", "createdAt", "userId"]
        },
        "Estimacion": {
            "title": "Estimacion",
            "description": "Represents an estimation within a contract.",
            "type": "object",
            "properties": {
                "tipo": { "type": "string", "enum": ["Parcial", "Total"] },
                "monto": { "type": "number" },
                "observaciones": { "type": "string" },
                "ordenCompraUrl": { "type": "string" },
                "createdAt": { "type": "string", "format": "date-time" },
                "evidencias": { "type": "array", "items": { "type": "string" } },
                "isCompleted": { "type": "boolean" }
            },
            "required": ["tipo", "monto", "createdAt", "isCompleted"]
        }
    },
    "auth": {
        "providers": ["anonymous"]
    },
    "firestore": {
        "/contratos/{contratoId}": {
            "schema": { "$ref": "#/entities/Contrato" },
            "description": "Stores all contracts. Access is controlled by userId field."
        },
        "/contratos/{contratoId}/estimaciones/{estimacionId}": {
            "schema": { "$ref": "#/entities/Estimacion" },
            "description": "Stores estimations for a specific contract."
        }
    }
}
